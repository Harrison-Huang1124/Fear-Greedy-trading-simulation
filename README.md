# 股票模拟交易系统

一个基于Flask的实时股票模拟交易应用，使用Alpha Vantage API获取真实的股票数据。

## 功能特性

- 🏦 **虚拟资金**: 每个用户初始资金$100,000
- 📈 **实时数据**: 使用Alpha Vantage API获取真实股票价格
- 🔍 **股票搜索**: 支持标普500股票搜索和自动建议
- 💰 **模拟交易**: 买入/卖出股票，实时计算收益
- 📊 **投资组合**: 查看持仓详情和总收益
- 📝 **交易历史**: 完整的交易记录
- 📈 **分时图**: 平滑的价格走势线图（无点显示）
- 📊 **成交量图**: 彩色柱状图显示成交量变化
- 📊 **财务数据**: 显示EPS、ROE、ROA、ROI、PEG、P/E等财务比率
- 🎨 **现代UI**: 响应式设计，美观易用

## 支持的股票

应用支持标普500中的主要股票，包括：
- 科技股：AAPL, MSFT, GOOGL, AMZN, TSLA, META, NVDA等
- 金融股：JPM, V, MA, AXP, GS等
- 医疗股：JNJ, PFE, ABT, TMO等
- 消费股：WMT, HD, COST, PEP等
- 工业股：CAT, BA, RTX, MMM等

## 安装和运行

### 方法1：使用启动脚本（推荐）

1. 双击运行 `start.bat`
2. 脚本会自动安装依赖并启动应用
3. 在浏览器中访问 `http://localhost:5000`

### 方法2：手动安装

1. 确保已安装Python 3.7或更高版本
2. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
3. 启动应用：
   ```bash
   python app.py
   ```
4. 在浏览器中访问 `http://localhost:5000`

## 使用说明

### 1. 用户注册/登录
- 输入用户名即可自动注册或登录
- 每个新用户自动获得$100,000虚拟资金

### 2. 搜索股票
- 在搜索框中输入股票代码（如：AAPL）
- 系统会显示搜索建议
- 点击搜索按钮获取实时价格

### 3. 进行交易
- 选择要交易的股票
- 输入交易数量
- 点击"买入"或"卖出"按钮
- 系统会实时更新您的投资组合

### 4. 查看投资组合
- 实时查看现金余额和股票持仓
- 查看总收益和收益率
- 查看每只股票的盈亏情况

### 5. 图表分析
- **分时图**: 平滑的价格走势线图，无点显示，更美观
- **成交量图**: 彩色柱状图，绿色表示上涨，红色表示下跌
- 基于5分钟间隔的实时数据
- 支持最近24小时的价格和成交量变化

### 6. 财务数据分析
- 查看关键财务比率：
  - **EPS** (每股收益)
  - **P/E** (市盈率)
  - **PEG** (PEG比率)
  - **ROE** (净资产收益率)
  - **ROA** (总资产收益率)
  - **ROI** (投资回报率)
- 查看公司基本信息（行业、市值、Beta系数等）

### 7. 交易历史
- 查看所有历史交易记录
- 包括交易时间、股票、数量、价格等信息

## API接口

应用提供以下API接口：

- `GET /api/stocks` - 获取股票列表
- `GET /api/stocks/search/<query>` - 搜索股票
- `GET /api/stock/<symbol>` - 获取股票价格
- `GET /api/stock/<symbol>/financials` - 获取财务数据
- `GET /api/stock/<symbol>/timeseries` - 获取时间序列数据
- `POST /api/user/create` - 创建用户
- `POST /api/user/login` - 用户登录
- `POST /api/trade/buy` - 买入股票
- `POST /api/trade/sell` - 卖出股票
- `GET /api/portfolio` - 获取投资组合
- `GET /api/transactions` - 获取交易历史

## 技术栈

- **后端**: Flask (Python)
- **前端**: HTML5, CSS3, JavaScript, Bootstrap 5, Chart.js
- **数据源**: Alpha Vantage API
- **功能**: 实时数据、模拟交易、投资组合管理、分时图、财务分析

## 注意事项

1. **API限制**: Alpha Vantage免费版有API调用限制，请合理使用
2. **数据延迟**: 免费版数据可能有15-20分钟延迟
3. **市场时间**: 股票数据仅在市场开放时间更新
4. **虚拟交易**: 这是模拟交易，不涉及真实资金

## 故障排除

### 常见问题

1. **无法获取股票价格**
   - 检查网络连接
   - 确认股票代码正确
   - 检查API调用限制

2. **应用无法启动**
   - 确认Python版本（需要3.7+）
   - 检查依赖是否正确安装
   - 查看控制台错误信息

3. **交易失败**
   - 检查余额是否充足
   - 确认股票数量是否正确
   - 检查是否已登录

## 开发信息

- **开发者**: AI Assistant
- **版本**: 1.0.0
- **最后更新**: 2024年
- **许可证**: MIT

## 支持

如有问题或建议，请查看控制台日志或联系开发者。